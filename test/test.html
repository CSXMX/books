<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    答案是

    第一轮宏任务
    start
    promise start
    promise end
    async
    fn2
    fn3
    fn4
    end

    一次清空微任务队列
    promise1,
    promise2,
    fn2 end,


    清空完后，加入新的微任务
    promise3
    end2
    fn4


</body>
<script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.9.0/vconsole.min.js"></script>

<script>
    // init vConsole
    var vConsole = new VConsole();
    console.log('Hello world');
</script>

</html>