h5 性能优化方向
通用方向
-
资源体积大小和打包速度（terser插件代码压缩、webpack条件编译、代码拆分、路由懒加载、
多线程打包插件、webpack打包缓存、splitchunks里有效拆分公共依赖，
提高缓存利用率、DllPlugin引入打包好的库、排除不需要外包文件、指定文件夹减少缩小范围）
- 减少网络请求（防抖节流、并发控制、图片懒加载、小图片base64、雪碧图、避免图片src为空等）、
- 资源的缓存（利用浏览器缓存、状态管理根据、storage里的和cookie缓存、有效拆分项目代码、存储公共依赖也是重要方向）、
- 浏览器渲染优化（批量操作dom、获取布局信息缓存处理、减少重绘重排、长列表的虚拟滚动）、
- 服务端渲染（开启SSR、首屏样式css文件内联返回）。
- 预加载方向： （接口数据的预请求）、html的预渲染（prerender-spa-plugin，用无头浏览器Puppeteer模拟浏览渲染，得到静态html文件并返回）、资源的预加载（
<link rel="preload" />）

实际方案
- 减少重绘重排
- 进入骨架屏配置，针对固定宽高的组件。
- 抖动布局优化，开发时注意脱离文档流。
- 微前端进一步拆分项目
- 明显提升热更新效率
- 影响页面完整加载的埋点上报
- 延迟上报时间或者改变上报时间，setTimeout 1s后上报，也可以用 requestAnimationFrame。
- 通过 IntersectionObserver api 去延迟发送展现埋点，通过属性标记的方式，只会发送1次展现埋点。
- JSON 渲染机制，利用数据罗盘项目想到的idea，将骨架屏占位的操作提前，减少浏览器的回流重绘操作。
- 浏览器缓存的充分利用
- 与后端一起抽离原有的业务代码逻辑，就是拆分JSON请求，增强业务数据的缓存利用率。
- 对于不涉及用户登录态、推荐算法、分流策略的数据接口，让后端都加上浏览器缓存。
- 让后端支持：抽取组件集的预加载数据。通过接口预请求的方式，让客户端直接发起H5页面首屏接口请求，远比等待客户端页面初始化、下载HTML、JS下载执行的时机更提前
，从而节省用户的首屏等待时间。在本地测试过程中发现接口预请求可提前100+ms，用户也就可以更快的看到内容。